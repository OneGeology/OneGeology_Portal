/* libcoverage - version 0.1.10 - 2017-09-13
 * See https://github.com/EOX-A/libcoverage.js for more information! */
!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=window.WCS=window.WCS||{};d.Utils=a("./utils"),d.Core=d.Core||{},d.Core.Parse=a("./parse"),d.Core.KVP=a("./kvp"),d.EO=d.EO||{},d.EO.KVP=a("./eowcs/kvp"),d.Core.Parse.pushParseFunctions(a("./eowcs/parse").parseFunctions)},{"./eowcs/kvp":2,"./eowcs/parse":3,"./kvp":4,"./parse":5,"./utils":6}],2:[function(a,b,c){"use strict";function d(a,b,c,d){if(!a||!b)throw new Error("Parameters 'url' and 'eoid' are mandatory.");c=c||{},d=d||{};var f=["service=wcs","version=2.0.0","request=describeeocoverageset","eoid="+b];!c.bbox||c.subsetX||c.subsetY||(c.subsetX=[c.bbox[0],c.bbox[2]],c.subsetY=[c.bbox[1],c.bbox[3]]),c.subsetX&&f.push("subset=x("+c.subsetX[0]+","+c.subsetX[1]+")"),c.subsetY&&f.push("subset=y("+c.subsetY[0]+","+c.subsetY[1]+")"),c.subsetTime&&f.push('subset=phenomenonTime("'+c.subsetTime[0]+'","'+c.subsetTime[1]+'")'),c.containment&&f.push("containment="+c.containment),c.count&&f.push("count="+c.count),c.sections&&f.push("sections="+c.sections.join(","));var g=e.objectToKVP(d);return a+("?"!==a.charAt(a.length-1)?"?":"")+f.join("&")+(g.length>0?"&"+g:"")}var e=a("../utils");b.exports={describeEOCoverageSetURL:d}},{"../utils":6}],3:[function(a,b,c){"use strict";function d(a){var b=l(a,"wcs:CoverageDescriptions"),c=null!=b?j.callParseFunctions("CoverageDescriptions",b):[],d=l(a,"wcseo:DatasetSeriesDescriptions"),e=null!=d?j.callParseFunctions("DatasetSeriesDescriptions",d):[];return{numberMatched:a.getAttribute("numberMatched"),numberReturned:a.getAttribute("numberReturned"),coverageDescriptions:c.coverageDescriptions,datasetSeriesDescriptions:e.datasetSeriesDescriptions}}function e(a){var b=i.map(m(a,"wcseo:DatasetSeriesDescription|wcseoold:DatasetSeriesDescription"),function(a){return j.callParseFunctions("DatasetSeriesDescription",a)});return{datasetSeriesDescriptions:b}}function f(a){return{datasetSeriesId:l(a,"wcseo:DatasetSeriesId/text()|wcseoold:DatasetSeriesId/text()"),timePeriod:[new Date(l(a,"gml:TimePeriod/gml:beginPosition/text()")),new Date(l(a,"gml:TimePeriod/gml:endPosition/text()"))]}}function g(a){return{contents:{datasetSeries:i.map(m(a,"wcs:Contents/wcs:Extension/wcseo:DatasetSeriesSummary|wcs:Contents/wcs:Extension/wcseoold:DatasetSeriesSummary"),function(a){return j.callParseFunctions("DatasetSeriesDescription",a)})}}}function h(a){var b=l(a,"gmlcov:metadata/gmlcov:Extension/wcseo:EOMetadata|gmlcov:metadata/wcseo:EOMetadata|gmlcov:metadata/gmlcov:Extension/wcseoold:EOMetadata|gmlcov:metadata/wcseoold:EOMetadata");if(b){var c=l(b,"eop:EarthObservation/om:phenomenonTime");return{footprint:i.stringToFloatArray(l(b,"eop:EarthObservation/om:featureOfInterest/eop:Footprint/eop:multiExtentOf/gml:MultiSurface/gml:surfaceMember/gml:Polygon/gml:exterior/gml:LinearRing/gml:posList/text()")),timePeriod:[new Date(l(c,"gml:TimePeriod/gml:beginPosition/text()")),new Date(l(c,"gml:TimePeriod/gml:endPosition/text()"))]}}return{}}var i=a("../utils"),j=a("../parse"),k={wcs:"http://www.opengis.net/wcs/2.0",gml:"http://www.opengis.net/gml/3.2",gmlcov:"http://www.opengis.net/gmlcov/1.0",eop:"http://www.opengis.net/eop/2.0",wcseo:"http://www.opengis.net/wcs/wcseo/1.0",wcseoold:"http://www.opengis.net/wcseo/1.0",om:"http://www.opengis.net/om/2.0"},l=i.createXPath(k),m=i.createXPathArray(k),n={EOCoverageSetDescription:d,DatasetSeriesDescriptions:e,DatasetSeriesDescription:f,Capabilities:g,CoverageDescription:h};b.exports={parseFunctions:n}},{"../parse":5,"../utils":6}],4:[function(a,b,c){"use strict";function d(a,b,c){if(!a)throw new Error("Parameter 'url' is mandatory.");b=b||{},c=c||{};var d=["service=wcs","version=2.0.0","request=getcapabilities"];b.updatesequence&&d.push("updatesequence="+b.updatesequence),b.sections&&d.push("sections="+b.sections.join(","));var e=g.objectToKVP(c);return a+("?"!==a.charAt(a.length-1)?"?":"")+d.join("&")+(e.length>0?"&"+e:"")}function e(a,b,c){if(!a||!b)throw new Error("Parameters 'url' and 'coverageids' are mandatory.");var d=["service=wcs","version=2.0.0","request=describecoverage"];c=c||{},d.push("coverageid="+("string"==typeof b?b:b.join(",")));var e=g.objectToKVP(c);return a+("?"!==a.charAt(a.length-1)?"?":"")+d.join("&")+(e.length>0?"&"+e:"")}function f(a,b,c,d){if(!a||!b)throw new Error("Parameters 'url' and 'coverageid' are mandatory.");c=c||{};var e=c.subsetCRS||"http://www.opengis.net/def/crs/EPSG/0/4326";"?"!==a.charAt(a.length-1)&&(a+="?");var f=["service=wcs","version=2.0.0","request=getcoverage","coverageid="+b];c.format&&f.push("format="+c.format),!c.bbox||c.subsetX||c.subsetY||(c.subsetX=[c.bbox[0],c.bbox[2]],c.subsetY=[c.bbox[1],c.bbox[3]]),c.subsetX&&f.push("subset=x("+c.subsetX[0]+","+c.subsetX[1]+")"),c.subsetY&&f.push("subset=y("+c.subsetY[0]+","+c.subsetY[1]+")"),c.subsetCRS&&f.push("subsettingCrs="+e),!c.size||c.sizeX||c.sizeY||(c.sizeX=c.size[0],c.sizeY=c.size[1]);var h=[];c.sizeX&&h.push("x("+c.sizeX+")"),c.sizeY&&h.push("y("+c.sizeY+")"),h.length>0&&f.push("scalesize="+h.join(",")),!c.resolution||c.resolutionX||c.resolutionY||(c.resolutionX=c.resolution[0],c.resolutionY=c.resolution[1]),c.rangeSubset&&f.push("rangesubset="+c.rangeSubset.join(",")),c.interpolation&&f.push("interpolation="+c.interpolation),c.outputCRS&&f.push("outputcrs="+c.outputCRS),c.multipart&&f.push("mediatype=multipart/mixed");var i=g.objectToKVP(d);return a+("?"!==a.charAt(a.length-1)?"?":"")+f.join("&")+(i.length>0?"&"+i:"")}var g=a("./utils");b.exports={getCapabilitiesURL:d,describeCoverageURL:e,getCoverageURL:f}},{"./utils":6}],5:[function(a,b,c){"use strict";function d(a,b){n.hasOwnProperty(a)?n[a].push(b):n[a]=[b]}function e(a){for(var b in a)d(b,a[b])}function f(a,b,c){if(n.hasOwnProperty(a)){for(var d=n[a],e={},f=0;f<d.length;++f){var g=d[f](b,c);m.deepMerge(e,g)}return e}throw new Error("No parsing function for tag name '"+a+"' registered.")}function g(a,b){var c;return c="string"==typeof a?l(a).documentElement:a.documentElement,f(c.localName,c,b)}function h(a,b){var c=p(a,"ows:Exception"),d={code:c.getAttribute("exceptionCode"),locator:c.getAttribute("locator"),text:p(c,"ows:ExceptionText/text()")};if(b&&b.throwOnException){var e=new Exception(d.text);throw e.locator=d.locator,e.code=d.code,e}return d}function i(a){return{serviceIdentification:{title:p(a,"ows:ServiceIdentification/ows:Title/text()"),"abstract":p(a,"ows:ServiceIdentification/ows:Abstract/text()"),keywords:q(a,"ows:ServiceIdentification/ows:Keywords/ows:Keyword/text()"),serviceType:p(a,"ows:ServiceIdentification/ows:ServiceType/text()"),serviceTypeVersion:p(a,"ows:ServiceIdentification/ows:ServiceTypeVersion/text()"),profiles:q(a,"ows:ServiceIdentification/ows:Profile/text()"),fees:p(a,"ows:ServiceIdentification/ows:Fees/text()"),accessConstraints:p(a,"ows:ServiceIdentification/ows:AccessConstraints/text()")},serviceProvider:{providerName:p(a,"ows:ServiceProvider/ows:ProviderName/text()"),providerSite:p(a,"ows:ServiceProvider/ows:ProviderSite/@xlink:href"),individualName:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:IndividualName/text()"),positionName:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:PositionName/text()"),contactInfo:{phone:{voice:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Phone/ows:Voice/text()"),facsimile:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Phone/ows:Facsimile/text()")},address:{deliveryPoint:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:DeliveryPoint/text()"),city:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:City/text()"),administrativeArea:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:AdministrativeArea/text()"),postalCode:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:PostalCode/text()"),country:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:Country/text()"),electronicMailAddress:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:Address/ows:ElectronicMailAddress/text()")},onlineResource:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:OnlineResource/@xlink:href"),hoursOfService:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:HoursOfService/text()"),contactInstructions:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:ContactInfo/ows:ContactInstructions/text()")},role:p(a,"ows:ServiceProvider/ows:ServiceContact/ows:Role/text()")},serviceMetadata:{formatsSupported:q(a,"wcs:ServiceMetadata/wcs:formatSupported/text()"),crssSupported:q(a,"wcs:ServiceMetadata/wcs:Extension/crs:CrsMetadata/crs:crsSupported/text()"),interpolationsSupported:q(a,"wcs:ServiceMetadata/wcs:Extension/int:InterpolationMetadata/int:InterpolationSupported/text()")},operations:m.map(q(a,"ows:OperationsMetadata/ows:Operation"),function(a){return{name:a.getAttribute("name"),getUrl:p(a,"ows:DCP/ows:HTTP/ows:Get/@xlink:href"),postUrl:p(a,"ows:DCP/ows:HTTP/ows:Post/@xlink:href")}}),contents:{coverages:m.map(q(a,"wcs:Contents/wcs:CoverageSummary"),function(a){return{coverageId:p(a,"wcs:CoverageId/text()"),coverageSubtype:p(a,"wcs:CoverageSubtype/text()"),WGS84BoundingBox:{lowerCorner:p(a,"ows:WGS84BoundingBox/ows:LowerCorner/text()"),upperCorner:p(a,"ows:WGS84BoundingBox/ows:UpperCorner/text()")},BoundingBox:{lowerCorner:p(a,"ows:BoundingBox /ows:LowerCorner/text()"),upperCorner:p(a,"ows:BoundingBox /ows:UpperCorner/text()")}}})}}}function j(a){var b=m.map(q(a,"wcs:CoverageDescription"),function(a){return f(a.localName,a)});return{coverageDescriptions:b}}function k(a){for(var b=m.stringToIntArray(p(a,"gml:domainSet/gml:RectifiedGrid/gml:limits/gml:GridEnvelope/gml:low/text()|gml:domainSet/gml:ReferenceableGrid/gml:limits/gml:GridEnvelope/gml:low/text()")),c=m.stringToIntArray(p(a,"gml:domainSet/gml:RectifiedGrid/gml:limits/gml:GridEnvelope/gml:high/text()|gml:domainSet/gml:ReferenceableGrid/gml:limits/gml:GridEnvelope/gml:high/text()")),d=[],e=0;e<Math.min(b.length,c.length);++e)d.push(c[e]+1-b[e]);var f=p(a,"gml:domainSet/gml:RectifiedGrid/gml:origin/gml:Point/gml:pos/text()");if(""!==f)var g=m.stringToFloatArray(f);for(var h=m.map(q(a,"gml:domainSet/gml:RectifiedGrid/gml:offsetVector/text()"),function(a){return m.stringToFloatArray(a)}),i=[],e=0;e<h.length;++e)for(var j=0;j<h.length;++j)0!=h[j][e]&&i.push(h[j][e]);var k=p(a,"gml:domainSet/gml:RectifiedGrid");k||(k=p(a,"gml:domainSet/gml:ReferenceableGrid"));var l={coverageId:p(a,"wcs:CoverageId/text()"),dimensions:parseInt(p(a,"gml:domainSet/gml:RectifiedGrid/@dimension|gml:domainSet/gml:ReferenceableGrid/@dimension")),bounds:{projection:p(a,"gml:boundedBy/gml:Envelope/@srsName"),lower:m.stringToFloatArray(p(a,"gml:boundedBy/gml:Envelope/gml:lowerCorner/text()")),upper:m.stringToFloatArray(p(a,"gml:boundedBy/gml:Envelope/gml:upperCorner/text()"))},envelope:{low:b,high:c},size:d,origin:g,offsetVectors:h,resolution:i,rangeType:m.map(q(a,"gmlcov:rangeType/swe:DataRecord/swe:field"),function(a){return{name:a.getAttribute("name"),description:p(a,"swe:Quantity/swe:description/text()"),uom:p(a,"swe:Quantity/swe:uom/@code"),nilValues:m.map(q(a,"swe:Quantity/swe:nilValues/swe:NilValues/swe:nilValue"),function(a){return{value:parseInt(a.textContent),reason:a.getAttribute("reason")}}),allowedValues:m.stringToFloatArray(p(a,"swe:Quantity/swe:constraint/swe:AllowedValues/swe:interval/text()")),significantFigures:parseInt(p(a,"swe:Quantity/swe:constraint/swe:AllowedValues/swe:significantFigures/text()"))}}),coverageSubtype:p(a,"wcs:ServiceParameters/wcs:CoverageSubtype/text()"),nativeFormat:p(a,"wcs:ServiceParameters/wcs:nativeFormat/text()")};return l}var l,m=a("./utils");"undefined"!=typeof window.DOMParser?l=function(a){return(new window.DOMParser).parseFromString(a,"text/xml")}:"undefined"!=typeof window.ActiveXObject&&new window.ActiveXObject("Microsoft.XMLDOM")&&(l=function(a){var b=new window.ActiveXObject("Microsoft.XMLDOM");return b.async="false",b.loadXML(a),b});var n={},o={xlink:"http://www.w3.org/1999/xlink",ows:"http://www.opengis.net/ows/2.0",wcs:"http://www.opengis.net/wcs/2.0",gml:"http://www.opengis.net/gml/3.2",gmlcov:"http://www.opengis.net/gmlcov/1.0",swe:"http://www.opengis.net/swe/2.0",crs:"http://www.opengis.net/wcs/crs/1.0","int":"http://www.opengis.net/wcs/interpolation/1.0"},p=m.createXPath(o),q=m.createXPathArray(o);e({Capabilities:i,ExceptionReport:h,CoverageDescriptions:j,CoverageDescription:k,RectifiedGridCoverage:k}),b.exports={pushParseFunction:d,pushParseFunctions:e,parse:g,callParseFunctions:f}},{"./utils":6}],6:[function(a,b,c){"use strict";function d(a){var b=[];for(var c in a)b.push(c+"="+a[c]);return b.join("&")}function e(a,b){return b=b||" ",g(a.split(b),function(a){return parseInt(a)})}function f(a,b){return b=b||" ",g(a.split(b),function(a){return parseFloat(a)})}function g(a,b){for(var c=[],d=0;d<a.length;++d)c.push(b(a[d]));return c}function h(a,b){if("object"==typeof a&&"object"==typeof b)for(var c in b)a.hasOwnProperty(c)&&"object"==typeof a[c]&&"object"==typeof b[c]?h(a[c],b[c]):a[c]=b[c]}function i(a){var b=function(b){return a[b]||null};return function(a,c){var d=a.ownerDocument,e=-1!=c.indexOf("text()")||-1!=c.indexOf("@");if(e)return d.evaluate(c,a,b,XPathResult.STRING_TYPE,null).stringValue;var f=d.evaluate(c,a,b,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);return 0==f.snapshotLength?null:f.snapshotItem(0)}}function j(a){var b=function(b){return a[b]||null};return function(a,c){for(var d=a.ownerDocument,e=d.evaluate(c,a,b,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),f=-1!=c.indexOf("text()")||-1!=c.indexOf("@"),g=new Array(e.snapshotLength),h=0;h<e.snapshotLength;++h)f?g[h]=e.snapshotItem(h).textContent:g[h]=e.snapshotItem(h);return g}}b.exports={objectToKVP:d,stringToIntArray:e,stringToFloatArray:f,map:g,deepMerge:h,createXPath:i,createXPathArray:j}},{}]},{},[1]);